The goal is to implement a fast, embedded music visualizer on an ESP32 using first principles (without looking anything up, other than the DFT math), and then benchmark that against a more informed approach in a separate branch.

Due to a few basics being missed with the ATMEGA328P (namely the internal conversion time taking 13 ADC cycles, not 13 CPU cycles, and the overhead of trying to stream data at any higher rate into a software buffer using SPI to emulate I2S on a device that's also doing an FFT), I'm moving to an ESP32.

# Blocks

## Handle Analog Signal
- Create CE amplifier fo increase the signal to the PCM1808's voltage range. - DONE

## Process Signal
- Interface an ESP32 with a PCM1808 for 24-bit audio using the dedicated I2S interface + drivers. - DONE
- Benchmark performance with onboard APLL:
    - With sinusoidal test signals generated by Python with known power spectra, read samples from ADC and calculate FFT. Then evaluate power distribution in non-sinusoidal frequencies.

## Write FFT

- Set up fixed-point arithmetic and test boundary cases <- IN PROGRESS
    - Configure multiple 1024-sample DMAs which feed into software buffers.
    - Convert to 1 sign bit 21 whole bits 10 fractional bits by extending padding but not performing a shift. This is equivalent to dividing by 2^10 but maintains resolution.
    - All complex multiplications are of sub-1 magnitude, so I'm not concerned about overflow through multiplication. 

- Try rectangular representation of complex values using a custom struct.
- Consider sample buffer size/DFT point counts.
    - Poll to read the DMA buffers as fast as possible?
    - Doing Cooley-Tukey naively on 1024 points
    - Apply a Hamming window
    - Overlap every half-window size
- Test against sine wave audio, determine methods to benchmark computation speed.

- Metrics:
    - Set up and experiment with picobench

## Hook to visualizer

- Many options from LCD to electromagnet-controlled ferrofluid(!), consider more when basics are done.
